### Authentication Controller E2E Tests
### Base URL and Environment Variables
@baseUrl = {{baseUrl}}
@apiPath = /api/authentication
@followApiPath = /api/members/follow

###############################################################################
### 1. ì‚¬ìš©ì A,B,C,D íšŒì›ê°€ì… (ë‚´ê°€ ì§„ì§œ ëˆì´ ì—†ì–´ì„œ ì†ìœ¼ë¡œ ì§ì ‘ ì“´ë‹¤. Claude ëŒë¦¬ê³  ì‹¶ì€ë°..)
###############################################################################

### 1-1. ì •ìƒ íšŒì›ê°€ì… (ë©¤ë²„ A)
POST {{baseUrl}}{{apiPath}}/signup
Content-Type: application/json

{
  "email": "case2-member-a@example.com",
  "password": "Password123!",
  "memberName": "case2 member A",
  "handle": "case2_member_a",
  "displayName": "Case2. Member A",
  "bio": "Case 2 í…ŒìŠ¤íŠ¸ : A ì‚¬ìš©ìì…ë‹ˆë‹¤. ë°˜ê°€ì›Œìš”. ğŸšœ ğŸšœ ğŸšœ ğŸšœ ğŸšœ",
  "location": "Seoul, Korea",
  "websiteUrl": "https://example.com",
  "birthDate": "1990-01-01",
  "gender": "MALE",
  "timezone": "Asia/Seoul",
  "languageCode": "ko",
  "countryCode": "KR",
  "privacyLevel": "PUBLIC",
  "isActive": true,
  "avatarUrl": "https://example.com/avatar.jpg",
  "coverUrl": "https://example.com/cover.jpg"
}

> {%
    client.test("íšŒì›ê°€ì… ì„±ê³µ", function() {
        client.assert(response.status === 201, "ì‘ë‹µ ìƒíƒœì½”ë“œê°€ 201ì´ì–´ì•¼ í•¨");
        client.assert(response.body.result === "SUCCESS", "ê²°ê³¼ê°€ SUCCESSì—¬ì•¼ í•¨");
    });

    // content.id ê°’ì„ member_b ë³€ìˆ˜ì— ì €ì¥
    client.global.set("member_a_id", response.body.content.id);
    console.log("member_a_id:", client.global.get("member_a_id"));
%}


### 1-2. ì •ìƒ íšŒì›ê°€ì… (ë©¤ë²„ B)
POST {{baseUrl}}{{apiPath}}/signup
Content-Type: application/json

{
  "email": "case2-member-b@example.com",
  "password": "Password123!",
  "memberName": "case2 member B",
  "handle": "case2_member_b",
  "displayName": "Case2. Member B",
  "bio": "Case 2 í…ŒìŠ¤íŠ¸ : B ì‚¬ìš©ìì…ë‹ˆë‹¤. ë°˜ê°€ì›Œìš”. ğŸšœ ğŸšœ ğŸšœ ğŸšœ ğŸšœ",
  "location": "Seoul, Korea",
  "websiteUrl": "https://example.com",
  "birthDate": "1990-01-01",
  "gender": "MALE",
  "timezone": "Asia/Seoul",
  "languageCode": "ko",
  "countryCode": "KR",
  "privacyLevel": "PUBLIC",
  "isActive": true,
  "avatarUrl": "https://example.com/avatar.jpg",
  "coverUrl": "https://example.com/cover.jpg"
}

> {%
    client.test("íšŒì›ê°€ì… ì„±ê³µ", function() {
        client.assert(response.status === 201, "ì‘ë‹µ ìƒíƒœì½”ë“œê°€ 201ì´ì–´ì•¼ í•¨");
        client.assert(response.body.result === "SUCCESS", "ê²°ê³¼ê°€ SUCCESSì—¬ì•¼ í•¨");
    });

    // content.id ê°’ì„ member_b ë³€ìˆ˜ì— ì €ì¥
    client.global.set("member_b_id", response.body.content.id);
    console.log("member_b_id:", client.global.get("member_b_id"));
%}


### 1-2. ì •ìƒ íšŒì›ê°€ì… (ë©¤ë²„ C)
POST {{baseUrl}}{{apiPath}}/signup
Content-Type: application/json

{
  "email": "case2-member-c@example.com",
  "password": "Password123!",
  "memberName": "case2 member C",
  "handle": "case2_member_c",
  "displayName": "Case2. Member C",
  "bio": "Case 2 í…ŒìŠ¤íŠ¸ : C ì‚¬ìš©ìì…ë‹ˆë‹¤. ë°˜ê°€ì›Œìš”. ğŸšœ ğŸšœ ğŸšœ ğŸšœ ğŸšœ",
  "location": "Seoul, Korea",
  "websiteUrl": "https://example.com",
  "birthDate": "1990-01-01",
  "gender": "MALE",
  "timezone": "Asia/Seoul",
  "languageCode": "ko",
  "countryCode": "KR",
  "privacyLevel": "PUBLIC",
  "isActive": true,
  "avatarUrl": "https://example.com/avatar.jpg",
  "coverUrl": "https://example.com/cover.jpg"
}

> {%
    client.test("íšŒì›ê°€ì… ì„±ê³µ", function() {
        client.assert(response.status === 201, "ì‘ë‹µ ìƒíƒœì½”ë“œê°€ 201ì´ì–´ì•¼ í•¨");
        client.assert(response.body.result === "SUCCESS", "ê²°ê³¼ê°€ SUCCESSì—¬ì•¼ í•¨");
    });

    // content.id ê°’ì„ member_b ë³€ìˆ˜ì— ì €ì¥
    client.global.set("member_c_id", response.body.content.id);
    console.log("member_c_id:", client.global.get("member_c_id"));
%}


### 1-2. ì •ìƒ íšŒì›ê°€ì… (ë©¤ë²„ D)
POST {{baseUrl}}{{apiPath}}/signup
Content-Type: application/json

{
  "email": "case2-member-d@example.com",
  "password": "Password123!",
  "memberName": "case2 member D",
  "handle": "case2_member_d",
  "displayName": "Case2. Member D",
  "bio": "Case 2 í…ŒìŠ¤íŠ¸ : D ì‚¬ìš©ìì…ë‹ˆë‹¤. ë°˜ê°€ì›Œìš”. ğŸšœ ğŸšœ ğŸšœ ğŸšœ ğŸšœ",
  "location": "Seoul, Korea",
  "websiteUrl": "https://example.com",
  "birthDate": "1990-01-01",
  "gender": "MALE",
  "timezone": "Asia/Seoul",
  "languageCode": "ko",
  "countryCode": "KR",
  "privacyLevel": "PUBLIC",
  "isActive": true,
  "avatarUrl": "https://example.com/avatar.jpg",
  "coverUrl": "https://example.com/cover.jpg"
}

> {%
    client.test("íšŒì›ê°€ì… ì„±ê³µ", function() {
        client.assert(response.status === 201, "ì‘ë‹µ ìƒíƒœì½”ë“œê°€ 201ì´ì–´ì•¼ í•¨");
        client.assert(response.body.result === "SUCCESS", "ê²°ê³¼ê°€ SUCCESSì—¬ì•¼ í•¨");
    });

    // content.id ê°’ì„ member_b ë³€ìˆ˜ì— ì €ì¥
    client.global.set("member_d_id", response.body.content.id);
    console.log("member_d_id:", client.global.get("member_d_id"));
%}


###############################################################################
### 2. ë©¤ë²„ A ë¡œ ë¡œê·¸ì¸
###############################################################################




###############################################################################
### 3. Aê°€ B,C,D ë¥¼ íŒ”ë¡œìš° (Aì˜ íŒ”ë¡œì‰(íŒ”ë¡œìš°)ì´ 3ê°œì—¬ì•¼ í•¨)
###############################################################################
POST {{baseUrl}}{{followApiPath}}
Content-Type: application/json
Authorization: Bearer {{accessToken}}
{
  "memberIdToFollow": {{member_b_id}}
}
